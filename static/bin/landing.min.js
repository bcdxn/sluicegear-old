!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){function e(t){return a.raw?t:encodeURIComponent(t)}function i(t){return a.raw?t:decodeURIComponent(t)}function n(t){return e(a.json?JSON.stringify(t):String(t))}function o(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return t=decodeURIComponent(t.replace(s," ")),a.json?JSON.parse(t):t}catch(e){}}function r(e,i){var n=a.raw?e:o(e);return t.isFunction(i)?i(n):n}var s=/\+/g,a=t.cookie=function(o,s,c){if(void 0!==s&&!t.isFunction(s)){if(c=t.extend({},a.defaults,c),"number"==typeof c.expires){var p=c.expires,l=c.expires=new Date;l.setTime(+l+864e5*p)}return document.cookie=[e(o),"=",n(s),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")}for(var h=o?void 0:{},d=document.cookie?document.cookie.split("; "):[],u=0,m=d.length;m>u;u++){var v=d[u].split("="),y=i(v.shift()),g=v.join("=");if(o&&o===y){h=r(g,s);break}o||void 0===(g=r(g))||(h[y]=g)}return h};a.defaults={},t.removeCookie=function(e,i){return void 0===t.cookie(e)?!1:(t.cookie(e,"",t.extend({},i,{expires:-1})),!t.cookie(e))}}),!function(t,e){t.scrollToId=function(t,i){return i=i||1e3,e("html,body").animate({scrollTop:e(t).offset().top},i),!1},t.redirect=function(t){document.location.href=t},t.redirectNoAsk=function(t){window.onbeforeunload=function(){return null},document.location.href=t},t.confirm=function(i){e(".btn-wrapper").removeClass("show").addClass("hide"),e(".spinner-wrapper").removeClass("hide").addClass("show"),t.redirectNoAsk(i)}}(window.Sluice=window.Sluice||{},$),!function(t,e){function i(i,n,o,r){var s,a,c=t(".hero-panel",i);a=setInterval(function(){var n=t(".hero-gallery-ctrls-btn",o);r===e||null===r?s=t(".hero-panel.active",i).index()+1:(s=r,r=null),(0>s||s>=c.length)&&(s=0),c.removeClass("active"),n.removeClass("active"),c.eq(s).addClass("active"),n.eq(s).addClass("active")},n),i.attr("hero-interval-id",a)}function n(t){var i=t.attr("hero-interval-id");i!==e&&null!==i&&window.clearInterval(parseInt(i))}function o(e,o,r){var s,a,c=e.index();e.hasClass("active")||(s=e.parent().parent().parent().parent().parent(),a=t(".hero-panel",s),$buttons=t(".hero-gallery-ctrls-btn",s),a.removeClass("active"),a.eq(c).addClass("active"),$buttons.removeClass("active"),$buttons.eq(c).addClass("active"),n(s),i(s,o,r))}var r={wrapper:['<div class="hero-gallery-wrapper">','<div class="hero-gallery">',"{{HERO_PANELS}}","</div>","</div>"].join(""),panel:['<div class="hero-panel {{ACTIVE}} {{BG_STYLE}} {{FADE}}"></div>'].join(""),controls:['<div class="hero-gallery-ctrls-wrapper {{CTRLS_OVER_GALLERY}}">','<div class="hero-gallery-ctrls" style="width: {{CTRLS_WIDTH}}px">',"{{BUTTONS}}","</div>","</div>"].join(""),button:['<div class="hero-gallery-ctrls-btn"></div>'].join("")},s="active",a="fade-animate",c="",p=24;window.nextHeroGalleryId=0,t.fn.herogallery=function(e){var n,l,h,d,u=e.interval||5e3,m=e.fade===!1?!1:!0,v=(e.ctrlsOverGallery===!1?!1:!0,e.imgStyles||[]),y=t(e.ctrlsParent),g=c,C=c;for(d=0;d<v.length;d++)n=r.panel.replace("{{BG_STYLE}}",v[d]),n=0===d?n.replace("{{ACTIVE}}",s):n.replace("{{ACTIVE}}",c),n=m?n.replace("{{FADE}}",a):n.replace("{{FADE}}",c),g+=n,C+=r.button;return h=r.wrapper.replace("{{HERO_PANELS}}",g),l=r.controls.replace("{{CTRLS_OVER_GALLERY}}","over-gallery").replace("{{BUTTONS}}",C).replace("{{CTRLS_WIDTH}}",v.length*p),t(this).html(h),y.length<1&&(y=t(".hero-gallery",t(this))),y.append(l),t(".hero-gallery-ctrls-btn",y).eq(0).addClass("active"),y.on("click",".hero-gallery-ctrls-wrapper .hero-gallery-ctrls .hero-gallery-ctrls-btn",function(){o(t(this),u,y)}),t(this).each(function(e,n){i(t(n),u,y,1)}),t(this).attr("hero-gallery-id",nextHeroGalleryId),nextHeroGalleryId++,t(this)}}(jQuery),!function(t,e,i){function n(t){var e,i=[t.type,";"];for(e in t.config)i.push(e),i.push(":"),i.push(t.config[e]),i.push(";");return i.join("")}var o=10,r=8,s=46,a=4e3,c=600,p={};t.ShoppingCart=function(t,o){var r;this.$container=e(t),this.$headerComponent=e(".mini-cart-wrapper"),this.getItemKey=o||n,this.getItemKey=n,e.cookie.json=!0;try{r=e.cookie("sluice_cart_cookie"),r!==i&&null!==r&&""!==r?(this.items=r.items,this.keys=r.keys,this.numItems=r.numItems,this.nextUid=r.nextUid):this.empty()}catch(s){e.removeCookie("sluice_cart_cookie",null),this.empty()}this.totalPrice=this.getTotalPrice(),this._render(),this._listen()},t.ShoppingCart.prototype.empty=function(){this.items={},this.keys=[],this.numItems=0,this.nextUid=0,this.totalPrice=0},t.ShoppingCart.prototype.getShippingPrice=function(){return this.getSubtotalPrice()>=a?0:c},t.ShoppingCart.prototype.getSubtotalPrice=function(){var t,e,n=0;for(e=0;e<this.keys.length;e++)t=this.keys[e],t!==i&&null!==t&&this.items[t]!==i&&null!==this.items[t]&&(n+=this.items[t].item.config.price*this.items[t].quantity);return n},t.ShoppingCart.prototype.getTotalPrice=function(){return this.getShippingPrice()+this.getSubtotalPrice()},t.ShoppingCart.prototype.addItem=function(t,e){var n=this.getItemKey(t);e=e||1,this.items[n]!==i&&null!==this.items[n]?(this.items[n].quantity+e>o&&(e=o-this.items[n].quantity),this.items[n].quantity+=e):(this.items[n]={uid:this.nextUid,item:t,quantity:e},this.keys[this.nextUid]=n,this.nextUid++),this.numItems+=e,this.totalPrice=this.getTotalPrice(),this._saveStateInCookie(),this._render()},t.ShoppingCart.prototype.removeItem=function(t){var e=this.getItemKey(t);this.removeItemByKey(e)},t.ShoppingCart.prototype.removeItemByUid=function(t){var e=this.keys[t];this.removeItemByKey(e)},t.ShoppingCart.prototype.removeItemByKey=function(t){var e=this.items[t];return e===i||null===e?null:(this.keys[e.uid]=null,this.numItems-=e.quantity,delete this.items[t],this.totalPrice=this.getTotalPrice(),this._saveStateInCookie(),void this._render())},t.ShoppingCart.prototype.updateQuantity=function(t,e){var i=this.getItemKey(t);this.updateQuantityByKey(i,e)},t.ShoppingCart.prototype.updateQuantityByUid=function(t,e){var i=this.keys[t];this.updateQuantityByKey(i,e)},t.ShoppingCart.prototype.updateQuantityByKey=function(t,e){this.items[t]!==i&&(isNaN(e)||e>99||(0===e?(this.removeItemByKey(t),0===this.numItems&&this.empty()):0>e?e=Math.abs(e):(this.numItems+=e-this.items[t].quantity,this.items[t].quantity=e),this.totalPrice=this.getTotalPrice(),this._saveStateInCookie(),this._render()))},t.ShoppingCart.prototype.priceToString=function(t){var e=(Math.floor(t)/100).toFixed(2);return e="0.00"===e?"FREE":"$"+e},t.ShoppingCart.prototype._saveStateInCookie=function(){var t={};t.items=this.items,t.keys=this.keys,t.numItems=this.numItems,t.nextUid=this.nextUid,e.cookie.json=!0,e.removeCookie("sluice_cart_cookie"),e.cookie("sluice_cart_cookie",t,{expires:14})},p.CART=['<div class="shopping-cart-inner">','<div class="grid">{{CART_INNER}}</div>',"</div>"].join(""),p.ACTION_BTNS=['<div class="row cart-row mtl">','<div class="col l6 m6 s6 btn btn-grp btn-left blue-solid keep-shopping-btn">Keep shopping</div>','<div id="checkoutBtn" class="col spinner-btn l6 m6 s6 btn btn-grp btn-right green-solid  {{EMPTY_CLASS}}">','<div class="btn-wrapper show">',"Checkout with PayPal","</div>",'<div class="spinner-wrapper hide">','<div class="spinner">','<div class="rect1"></div>','<div class="rect2"></div>','<div class="rect3"></div>','<div class="rect4"></div>','<div class="rect5"></div>',"</div>","</div>","</div>","</div>"].join(""),p.TOTALS=['<div class="totals-wrapper mtl mbl">','<div class="row cart-row ptl">','<div class="col shopping-cart-total-price l12">','<span class="cart-total-price-lbl">Total</span>','<span class="cart-total-price-wrapper">','<span class="cart-total-price">{{TOTAL_PRICE}}</span>',"</span>","</div>","</div>",'<div class="row cart-row  pls prs mtl mbl">','<div class="hb col l12"></div>',"</div>",'<div class="row cart-row mtm">','<div class="col subtotal l12">','<span class="total-count">{{TOTAL_ITEM_COUNT}}</span>','<span class="total-count-lbl">{{TOTAL_ITEM_COUNT_LBL}}</span>','<span class="cart-subtotal-wrapper">','<span class="cart-subtotal">{{SUBTOTAL_PRICE}}</span>',"</span>","</div>","</div>",'<div class="row cart-row mtm pbl">','<div class="col subtotal l12">','<span class="shopping-lbl">Shipping</span>','<span class="shipping-wrapper">',"<span>{{SHIPPING_PRICE}}</span>","</span>","</div>","</div>","</div>"].join(""),p.SHIPPING_MESSAGE=['<div class="shipping-msg-wrapper mtl mbl">','<div class="row cart-row pam">',"Free US shipping on orders over $40.00","</div>","</div>"].join(""),p.CART_ITEM=['<div class="row cart-row pam">','<div class="col l6 m6 s6">','<div class="cart-preview-wrapper prm">','<img src="{{PREVIEW_SRC}}" />',"</div>","</div>",'<div class="col l5 m5 s5">','<div class="cart-item-quantity">QTY ','<input type="text" class="qty-input" value="{{ITEM_QTY}}" maxlength="2" data-item-key="{{ITEM_KEY}}" />',"</div>",'<div class="cart-item-title ptm">{{MODEL}}</div>','<div class="cart-item-price pbm">','<span class="cart-item-price-val">{{ITEM_PRICE}}</span>',"</div>",'<div class="cart-item-desc">{{ITEM_DESC}}</div>',"</div>",'<div class="col l1 m1 s1">','<div class="x-btn remove-item-btn" data-item-key="{{ITEM_KEY}}">X</div>',"</div>","</div>"].join(""),p.LINE_BREAK=['<div class="row cart-row  pls prs mtl">','<div class="hb col l12"></div>',"</div>"].join(""),p.EMPTY_CART=['<div class="row cart-row pls prs mtl">','<div class="col l12 l-txt-center m-txt-center s-txt-center">',"Your cart is empty","</div>","</div>"].join(""),p.HEADER_COMPONENT=['<div class="mini-cart">','<div class="mini-cart-lbl">Cart</div>','<div class="mini-cart-quantity">{{TOTAL_ITEM_COUNT}}</div>',"</div>"].join(""),t.ShoppingCart.prototype._render=function(){var t,e,n=p.HEADER_COMPONENT,o=p.CART,r=p.ACTION_BTNS,s="";if(this.numItems<1)this.$container.addClass("empty"),r=r.replace("{{EMPTY_CLASS}}","empty"),r+=p.EMPTY_CART;else for(this.$container.removeClass("empty"),r=r.replace("{{EMPTY_CLASS}}",""),r+=p.TOTALS.replace("{{TOTAL_PRICE}}",this.priceToString(this.totalPrice)).replace("{{TOTAL_ITEM_COUNT}}",this.numItems).replace("{{TOTAL_ITEM_COUNT_LBL}}",this.numItems>1?" Items":" Item").replace("{{SUBTOTAL_PRICE}}",this.priceToString(this.getSubtotalPrice())).replace("{{SHIPPING_PRICE}}",this.priceToString(this.getShippingPrice())),r+=p.SHIPPING_MESSAGE,r+=p.LINE_BREAK,e=0;e<this.keys.length;e++)t=this.items[this.keys[e]],t!==i&&null!==t&&("Hammock"===t.item.type&&(s=" Hammock"),r+=p.CART_ITEM.replace("{{PREVIEW_SRC}}",t.item.config.imgSrc).replace("{{ITEM_QTY}}",t.quantity).replace("{{MODEL}}",t.item.config.model+s).replace(/\{\{ITEM_KEY\}\}/g,this.keys[e]).replace("{{ITEM_PRICE}}",this.priceToString(t.item.config.price)).replace("{{ITEM_DESC}}",t.item.config.desc),r+=p.LINE_BREAK);o=o.replace("{{CART_INNER}}",r),this.$container.html(o),this.setCartWidth(),this.$headerComponent.html(n.replace("{{TOTAL_ITEM_COUNT}}",this.numItems))},t.ShoppingCart.prototype.hide=function(){this.$container.addClass("hidden"),e(".container").removeClass("expanded-shopping-cart")},t.ShoppingCart.prototype.expand=function(){this.$container.removeClass("hidden"),e(".container").addClass("expanded-shopping-cart")},t.ShoppingCart.prototype.setCartWidth=function(){var t=e(window).width();t>480&&(t=480),e(".shopping-cart-inner").css("width",t+"px")},t.ShoppingCart.prototype._listen=function(){this._onKeepShoppingClick(),this._onRemoveBtnClick(),this._onQuantityKeyUp(),this._onQuantityLoseFocus(),this._onCartBlur(),this._onCartClickStopPropagation(),this._onCartHeaderClick(),this._onCheckoutBtnClick(),this._onWindowResize()},t.ShoppingCart.prototype._onKeepShoppingClick=function(){var t=this;this.$container.on("click",".shopping-cart-inner .grid .row .keep-shopping-btn",function(){t.hide()})},t.ShoppingCart.prototype._onRemoveBtnClick=function(){var t=this;this.$container.on("click",".shopping-cart-inner .grid .row .col .remove-item-btn",function(){t.removeItemByKey(e(this).attr("data-item-key"))})},t.ShoppingCart.prototype._onQuantityKeyUp=function(){var t,i=this;this.$container.on("keyup",".shopping-cart-inner .grid .row .col .cart-item-quantity .qty-input",function(n){var a;if(t=e(this).attr("data-item-key"),n.keyCode!==r&&n.keyCode!==s||e(this).val().trim().length>0)try{a=parseInt(e(this).val().trim()),isNaN(a)||a>o?i._render():i.updateQuantityByKey(t,a)}catch(c){i._render()}e('.qty-input[data-item-key="'+t+'"]').focus(),e('.qty-input[data-item-key="'+t+'"]').val(e('.qty-input[data-item-key="'+t+'"]').val())})},t.ShoppingCart.prototype._onQuantityLoseFocus=function(){var t=this;this.$container.on("blur",".shopping-cart-inner .grid .row .col .cart-item-quantity .qty-input",function(){var i=e(this).val().trim();(i.length>2||i.length<1||isNaN(i)||parseInt(i)>o)&&t._render()})},t.ShoppingCart.prototype._onCartBlur=function(){var t=this;e(document).on("click",function(){t.hide()})},t.ShoppingCart.prototype._onCartClickStopPropagation=function(){this.$container.on("click",function(t){t.stopPropagation()})},t.ShoppingCart.prototype._onCartHeaderClick=function(){var t=this;this.$headerComponent.on("click",function(e){t.expand(),e.stopPropagation()})},t.ShoppingCart.prototype._onCheckoutBtnClick=function(){var t,i=this,n=[];this.$container.on("click",".shopping-cart-inner .grid .row #checkoutBtn",function(o){if(e(document).add("*").off(),o.stopPropagation(),i.numItems>0&&e(".btn-wrapper",e(this)).hasClass("show")){e(".btn-wrapper",e(this)).removeClass("show").addClass("hide"),e(".spinner-wrapper",e(this)).removeClass("hide").addClass("show");for(key in i.items)n.push(i.items[key]);t=encodeURIComponent(JSON.stringify(n)),window.location.href="/order?paymentMethod=paypal&cart="+t}})},t.ShoppingCart.prototype._onWindowResize=function(){var t=this;e(window).on("resize",function(){t.setCartWidth()})}}(window.Sluice=window.Sluice||{},jQuery),!function(t,e){function i(e){e.on("scroll",function(){n(t("#infographicBottom").get(0),0)&&!t("#infographicThread").hasClass("animated")?setTimeout(function(){t("#infographicThread").addClass("animated bounceIn"),setTimeout(function(){t("#infographicClip").addClass("animated bounceIn"),setTimeout(function(){t("#infographicStash").addClass("animated bounceIn"),setTimeout(function(){t("#infographicSnap").addClass("animated bounceIn")},800)},800)},800)},100):n(t("#infographicTop").get(0),0)||(t("#infographicThread").removeClass("animated bounceIn"),t("#infographicClip").removeClass("animated bounceIn"),t("#infographicStash").removeClass("animated bounceIn"),t("#infographicSnap").removeClass("animated bounceIn"))})}function n(t,e){var i=t.getBoundingClientRect();return i.top-window.innerHeight+e<0}{var o=e;new o("#shoppingCartContainer")}t("#HeroWrapper").herogallery({imgStyles:["pnl0","pnl1","pnl2","pnl3"],interval:7e3}),t("#learnMoreBtn").on("click",function(){Sluice.scrollToId("#specs",500)}),t("#showAllSpecsBtn").on("click",function(){var e=t("#fullSpecContainer");e.hasClass("hide")?(t(this).html("Less specs"),e.removeClass("hide").addClass("show")):(t(this).html("More specs"),e.removeClass("show").addClass("hide"))}),t(window).on("scroll",function(){var e=t(this).height(),i=t("#introSection").offset().top,n=0,o=-30,r=o,s=Math.abs(o),a=600,c=t("#introSectionParallaxBg");i>e&&(n=i-e),t(this).scrollTop()>n&&(r=o+s*((t(this).scrollTop()-n)/a)),r>0&&(r=0),c.css("left",r+"%")}),t(window).on("scroll",function(){var e=t(this).height(),i=t("#portableSection").offset().top,n=0,o=0,r=30,s=o,a=Math.abs(r-o),c=600,p=t("#portableSectionParallaxBg");i>e&&(n=i-e),t(this).scrollTop()>n&&(s=o+a*((t(this).scrollTop()-n)/c)),s>30&&(s=30),p.css("right",s+"%")}),i(t(window))}(jQuery,Sluice.ShoppingCart);
