!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){function i(t){return a.raw?t:encodeURIComponent(t)}function e(t){return a.raw?t:decodeURIComponent(t)}function n(t){return i(a.json?JSON.stringify(t):String(t))}function o(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return t=decodeURIComponent(t.replace(r," ")),a.json?JSON.parse(t):t}catch(i){}}function s(i,e){var n=a.raw?i:o(i);return t.isFunction(e)?e(n):n}var r=/\+/g,a=t.cookie=function(o,r,c){if(void 0!==r&&!t.isFunction(r)){if(c=t.extend({},a.defaults,c),"number"==typeof c.expires){var p=c.expires,l=c.expires=new Date;l.setTime(+l+864e5*p)}return document.cookie=[i(o),"=",n(r),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")}for(var h=o?void 0:{},d=document.cookie?document.cookie.split("; "):[],u=0,m=d.length;m>u;u++){var v=d[u].split("="),g=e(v.shift()),C=v.join("=");if(o&&o===g){h=s(C,r);break}o||void 0===(C=s(C))||(h[g]=C)}return h};a.defaults={},t.removeCookie=function(i,e){return void 0===t.cookie(i)?!1:(t.cookie(i,"",t.extend({},e,{expires:-1})),!t.cookie(i))}}),!function(t,i){t.scrollToId=function(t,e){return e=e||1e3,i("html,body").animate({scrollTop:i(t).offset().top},e),!1},t.redirect=function(t){document.location.href=t},t.redirectNoAsk=function(t){window.onbeforeunload=function(){return null},document.location.href=t},t.confirm=function(e){i(".btn-wrapper").removeClass("show").addClass("hide"),i(".spinner-wrapper").removeClass("hide").addClass("show"),t.redirectNoAsk(e)},t.isUserMobile=function(){return/(iPad|iPhone|iPod)/gi.test(navigator.userAgent)||i(window).width<481}}(window.Sluice=window.Sluice||{},$),!function(t,i){function e(e,n,o,s){var r,a,c=t(".hero-panel",e);a=setInterval(function(){var n=t(".hero-gallery-ctrls-btn",o);s===i||null===s?r=t(".hero-panel.active",e).index()+1:(r=s,s=null),(0>r||r>=c.length)&&(r=0),c.removeClass("active"),n.removeClass("active"),c.eq(r).addClass("active"),n.eq(r).addClass("active")},n),e.attr("hero-interval-id",a)}function n(t){var e=t.attr("hero-interval-id");e!==i&&null!==e&&window.clearInterval(parseInt(e))}function o(i,o,s){var r,a,c=i.index();i.hasClass("active")||(r=i.parent().parent().parent().parent().parent(),a=t(".hero-panel",r),$buttons=t(".hero-gallery-ctrls-btn",r),a.removeClass("active"),a.eq(c).addClass("active"),$buttons.removeClass("active"),$buttons.eq(c).addClass("active"),n(r),e(r,o,s))}var s={wrapper:['<div class="hero-gallery-wrapper">','<div class="hero-gallery">',"{{HERO_PANELS}}","</div>","</div>"].join(""),panel:['<div class="hero-panel {{ACTIVE}} {{BG_STYLE}} {{FADE}}"></div>'].join(""),controls:['<div class="hero-gallery-ctrls-wrapper {{CTRLS_OVER_GALLERY}}">','<div class="hero-gallery-ctrls" style="width: {{CTRLS_WIDTH}}px">',"{{BUTTONS}}","</div>","</div>"].join(""),button:['<div class="hero-gallery-ctrls-btn"></div>'].join("")},r="active",a="fade-animate",c="",p=24;window.nextHeroGalleryId=0,t.fn.herogallery=function(i){var n,l,h,d,u=i.interval||5e3,m=i.fade===!1?!1:!0,v=(i.ctrlsOverGallery===!1?!1:!0,i.imgStyles||[]),g=t(i.ctrlsParent),C=c,y=c;for(d=0;d<v.length;d++)n=s.panel.replace("{{BG_STYLE}}",v[d]),n=0===d?n.replace("{{ACTIVE}}",r):n.replace("{{ACTIVE}}",c),n=m?n.replace("{{FADE}}",a):n.replace("{{FADE}}",c),C+=n,y+=s.button;return h=s.wrapper.replace("{{HERO_PANELS}}",C),l=s.controls.replace("{{CTRLS_OVER_GALLERY}}","over-gallery").replace("{{BUTTONS}}",y).replace("{{CTRLS_WIDTH}}",v.length*p),t(this).html(h),g.length<1&&(g=t(".hero-gallery",t(this))),g.append(l),t(".hero-gallery-ctrls-btn",g).eq(0).addClass("active"),g.on("click",".hero-gallery-ctrls-wrapper .hero-gallery-ctrls .hero-gallery-ctrls-btn",function(){o(t(this),u,g)}),t(this).each(function(i,n){e(t(n),u,g,1)}),t(this).attr("hero-gallery-id",nextHeroGalleryId),nextHeroGalleryId++,t(this)}}(jQuery),!function(t,i,e){function n(t){var i,e=[t.type,";"];for(i in t.config)e.push(i),e.push(":"),e.push(t.config[i]),e.push(";");return e.join("")}var o=10,s=4e3,r=600,a={};t.ShoppingCart=function(t,o){var s;this.$container=i(t),this.$headerComponent=i(".mini-cart-wrapper"),this.getItemKey=o||n,this.getItemKey=n,this.expandedContainerHeight=i(window).height(),i.cookie.json=!0;try{s=i.cookie("sluice_cart_cookie"),s!==e&&null!==s&&""!==s?(this.items=s.items||{},this.keys=s.keys||[],this.numItems=s.numItems||0,this.nextUid=s.nextUid||0,this.discount=s.discount||0,this.couponCode=s.couponCode||"",this.couponMsg=s.couponMsg||""):this.empty()}catch(r){i.removeCookie("sluice_cart_cookie",null),this.empty()}this.totalPrice=this.getTotalPrice(),this._render(),this._listen()},t.ShoppingCart.prototype.empty=function(){this.items={},this.keys=[],this.numItems=0,this.nextUid=0,this.totalPrice=0,this.discount=0,this.couponCode="",this.couponMsg=""},t.ShoppingCart.prototype.getShippingPrice=function(){return this.getSubtotalPrice()>=s?0:r},t.ShoppingCart.prototype.getSubtotalPrice=function(){var t,i,n=0;for(i=0;i<this.keys.length;i++)t=this.keys[i],t!==e&&null!==t&&this.items[t]!==e&&null!==this.items[t]&&(n+=this.items[t].item.config.price*this.items[t].quantity);return n},t.ShoppingCart.prototype.getTotalPrice=function(){var t=this.getShippingPrice()+this.getSubtotalPrice();return t-=t*this.discount},t.ShoppingCart.prototype.addItem=function(t,i){var n=this.getItemKey(t);i=i||1,this.items[n]!==e&&null!==this.items[n]?(this.items[n].quantity+i>o&&(i=o-this.items[n].quantity),this.items[n].quantity+=i):(this.items[n]={uid:this.nextUid,item:t,quantity:i},this.keys[this.nextUid]=n,this.nextUid++),this.numItems+=i,this.totalPrice=this.getTotalPrice(),this._saveStateInCookie(),this._render()},t.ShoppingCart.prototype.removeItem=function(t){var i=this.getItemKey(t);this.removeItemByKey(i)},t.ShoppingCart.prototype.removeItemByUid=function(t){var i=this.keys[t];this.removeItemByKey(i)},t.ShoppingCart.prototype.removeItemByKey=function(t){var i=this.items[t];return i===e||null===i?null:(this.keys[i.uid]=null,this.numItems-=i.quantity,delete this.items[t],this.totalPrice=this.getTotalPrice(),this._saveStateInCookie(),void this._render())},t.ShoppingCart.prototype.updateQuantity=function(t,i){var e=this.getItemKey(t);this.updateQuantityByKey(e,i)},t.ShoppingCart.prototype.updateQuantityByUid=function(t,i){var e=this.keys[t];this.updateQuantityByKey(e,i)},t.ShoppingCart.prototype.updateQuantityByKey=function(t,i){this.items[t]!==e&&(isNaN(i)||i>99||(0===i?(this.removeItemByKey(t),0===this.numItems&&this.empty()):0>i?i=Math.abs(i):(this.numItems+=i-this.items[t].quantity,this.items[t].quantity=i),this.totalPrice=this.getTotalPrice(),this._saveStateInCookie(),this._render()))},t.ShoppingCart.prototype.priceToString=function(t){var i=(Math.floor(t)/100).toFixed(2);return i="0.00"===i?"FREE":"$"+i},t.ShoppingCart.prototype._saveStateInCookie=function(){var t={};t.items=this.items,t.keys=this.keys,t.numItems=this.numItems,t.nextUid=this.nextUid,t.discount=this.discount,t.couponCode=this.couponCode,t.couponMsg=this.couponMsg,i.cookie.json=!0,i.removeCookie("sluice_cart_cookie"),i.cookie("sluice_cart_cookie",t,{expires:14})},a.CART=['<div class="shopping-cart-inner">','<div class="grid">{{CART_INNER}}</div>',"</div>"].join(""),a.ACTION_BTNS=['<div class="row cart-row mtl">','<div class="col l6 m6 s6 btn btn-grp btn-left blue-solid keep-shopping-btn">Keep shopping</div>','<div id="checkoutBtn" class="col spinner-btn l6 m6 s6 btn btn-grp btn-right green-solid  {{EMPTY_CLASS}}">','<div class="btn-wrapper show">',"Checkout with PayPal","</div>",'<div class="spinner-wrapper hide">','<div class="spinner">','<div class="rect1"></div>','<div class="rect2"></div>','<div class="rect3"></div>','<div class="rect4"></div>','<div class="rect5"></div>',"</div>","</div>","</div>","</div>"].join(""),a.TOTALS=['<div class="totals-wrapper mtl mbl">','<div class="row cart-row ptl">','<div class="col shopping-cart-total-price l12">','<span class="cart-total-price-lbl">Total</span>','<span class="cart-total-price-wrapper">','<span class="cart-total-price">{{TOTAL_PRICE}}</span>',"</span>","</div>","</div>",'<div class="row cart-row  pls prs mtl mbl">','<div class="hb col l12"></div>',"</div>",'<div class="row cart-row">','<span class="coupon-code-lbl">Coupon Code</span>','<span class="coupon-code-wrapper">','<input type="text" class="coupon-code-input">','<input class="coupon-code-btn btn green-solid shadow" type="button" value="apply">',"</span>","</div>",'<div class="row cart-row  pls prs mtl mbl">','<div class="hb col l12"></div>',"</div>",'<div class="row cart-row mtm coupon-row">','<span class="shopping-lbl coupon-lbl">Coupon</span>','<span class="coupon-msg"></span>',"</div>",'<div class="row cart-row mtm">','<div class="col subtotal l12">','<span class="total-count">{{TOTAL_ITEM_COUNT}}</span>','<span class="total-count-lbl">{{TOTAL_ITEM_COUNT_LBL}}</span>','<span class="cart-subtotal-wrapper">','<span class="cart-subtotal">{{SUBTOTAL_PRICE}}</span>',"</span>","</div>","</div>",'<div class="row cart-row mtm pbl">','<div class="col subtotal l12">','<span class="shopping-lbl">Shipping</span>','<span class="shipping-wrapper">',"<span>{{SHIPPING_PRICE}}</span>","</span>","</div>","</div>","</div>"].join(""),a.SHIPPING_MESSAGE=['<div class="shipping-msg-wrapper mtl mbl">','<div class="row cart-row pam">',"Free US shipping on orders over $40.00","</div>","</div>"].join(""),a.CART_ITEM=['<div class="row cart-row pam">','<div class="col l6 m6 s6">','<div class="cart-preview-wrapper prm">','<img src="{{PREVIEW_SRC}}", alt="preview" />',"</div>","</div>",'<div class="col l5 m5 s5">','<div class="cart-item-quantity">QTY ','<span class="qty-val">{{ITEM_QTY}}</span>','<input type="button" class="update-btn plus mlm" value="+" data-item-key="{{ITEM_KEY}}" />','<input type="button" class="update-btn minus mlm" value="-" data-item-key="{{ITEM_KEY}}" />',"</div>",'<div class="cart-item-title ptm">{{MODEL}}</div>','<div class="cart-item-price pbm">','<span class="cart-item-price-val">{{ITEM_PRICE}}</span>',"</div>",'<div class="cart-item-desc">{{ITEM_DESC}}</div>',"</div>",'<div class="col l1 m1 s1">','<div class="x-btn remove-item-btn" data-item-key="{{ITEM_KEY}}">X</div>',"</div>","</div>"].join(""),a.LINE_BREAK=['<div class="row cart-row  pls prs mtl">','<div class="hb col l12"></div>',"</div>"].join(""),a.EMPTY_CART=['<div class="row cart-row pls prs mtl">','<div class="col l12 l-txt-center m-txt-center s-txt-center">',"Your cart is empty","</div>","</div>"].join(""),a.HEADER_COMPONENT=['<div class="mini-cart">','<div class="mini-cart-lbl">Cart</div>','<div class="mini-cart-quantity">{{TOTAL_ITEM_COUNT}}</div>',"</div>"].join(""),t.ShoppingCart.prototype._render=function(){var t,n,o=a.HEADER_COMPONENT,s=a.CART,r=a.ACTION_BTNS,c="";if(this.totalPrice=this.getTotalPrice(),this.numItems<1)this.$container.addClass("empty"),r=r.replace("{{EMPTY_CLASS}}","empty"),r+=a.EMPTY_CART;else for(this.$container.removeClass("empty"),r=r.replace("{{EMPTY_CLASS}}",""),r+=a.TOTALS.replace("{{TOTAL_PRICE}}",this.priceToString(this.totalPrice)).replace("{{TOTAL_ITEM_COUNT}}",this.numItems).replace("{{TOTAL_ITEM_COUNT_LBL}}",this.numItems>1?" Items":" Item").replace("{{SUBTOTAL_PRICE}}",this.priceToString(this.getSubtotalPrice())).replace("{{SHIPPING_PRICE}}",this.priceToString(this.getShippingPrice())),r+=a.SHIPPING_MESSAGE,r+=a.LINE_BREAK,n=0;n<this.keys.length;n++)t=this.items[this.keys[n]],t!==e&&null!==t&&(c="","Hammock"===t.item.type&&(c=" Hammock"),r+=a.CART_ITEM.replace("{{PREVIEW_SRC}}",t.item.config.imgSrc).replace("{{ITEM_QTY}}",t.quantity).replace("{{MODEL}}",t.item.config.model+c).replace(/\{\{ITEM_KEY\}\}/g,this.keys[n]).replace("{{ITEM_PRICE}}",this.priceToString(t.item.config.price)).replace("{{ITEM_DESC}}",t.item.config.desc),r+=a.LINE_BREAK);s=s.replace("{{CART_INNER}}",r),this.$container.html(s),this.discount>0&&this.couponMsg!==e&&null!==this.couponMsg&&this.couponMsg.length>0?(i(".coupon-row").removeClass("hide"),console.log("message: "+this.couponMsg),i(".coupon-msg").html(this.couponMsg)):i(".coupon-row").addClass("hide"),this.setCartWidth(),this.$headerComponent.html(o.replace("{{TOTAL_ITEM_COUNT}}",this.numItems))},t.ShoppingCart.prototype.hide=function(){this.$container.addClass("hidden"),i(".container").removeClass("expanded-shopping-cart").css("height","auto")},t.ShoppingCart.prototype.expand=function(){this.$container.removeClass("hidden"),i(".container").addClass("expanded-shopping-cart").css("height",this.expandedContainerHeight+"px")},t.ShoppingCart.prototype.setCartWidth=function(){var t=i(window).width();t>480&&(t=480),i(".shopping-cart-inner").css("width",t+"px")},t.ShoppingCart.prototype._listen=function(){this._onKeepShoppingClick(),this._onRemoveBtnClick(),this._onPlusBtnClick(),this._onMinusBtnClick(),this._onQuantityLoseFocus(),this._onCartBlur(),this._onCartClickStopPropagation(),this._onCartHeaderClick(),this._onCheckoutBtnClick(),this._onWindowResize(),this._onCouponCodeBtnClick()},t.ShoppingCart.prototype._onKeepShoppingClick=function(){var t=this;this.$container.on("click",".shopping-cart-inner .grid .row .keep-shopping-btn",function(){t.hide()})},t.ShoppingCart.prototype._onRemoveBtnClick=function(){var t=this;this.$container.on("click",".shopping-cart-inner .grid .row .col .remove-item-btn",function(){t.removeItemByKey(i(this).attr("data-item-key"))})},t.ShoppingCart.prototype._onPlusBtnClick=function(){var t,n=this;this.$container.on("click",".shopping-cart-inner .grid .row .col .cart-item-quantity .plus",function(){t=i(this).attr("data-item-key"),n.items[t]!==e&&null!==n.items[t]&&n.items[t].quantity<10&&(n.updateQuantityByKey(t,n.items[t].quantity+1),n._render())})},t.ShoppingCart.prototype._onMinusBtnClick=function(){var t,n=this;this.$container.on("click",".shopping-cart-inner .grid .row .col .cart-item-quantity .minus",function(){t=i(this).attr("data-item-key"),n.items[t]!==e&&null!==n.items[t]&&(n.updateQuantityByKey(t,n.items[t].quantity-1),n._render())})},t.ShoppingCart.prototype._onQuantityLoseFocus=function(){var t=this;this.$container.on("blur",".shopping-cart-inner .grid .row .col .cart-item-quantity .qty-input",function(){var e=i(this).val().trim();(e.length>2||e.length<1||isNaN(e)||parseInt(e)>o)&&t._render()})},t.ShoppingCart.prototype._onCartBlur=function(){var t=this;i(document).on("click",function(){t.hide()})},t.ShoppingCart.prototype._onCartClickStopPropagation=function(){this.$container.on("click",function(t){t.stopPropagation()})},t.ShoppingCart.prototype._onCartHeaderClick=function(){var t=this;this.$headerComponent.on("click",function(i){t.expand(),i.stopPropagation()})},t.ShoppingCart.prototype._onCheckoutBtnClick=function(){var t,n,o=this,s=[];this.$container.on("click",".shopping-cart-inner .grid .row #checkoutBtn",function(r){if(r.stopPropagation(),o.numItems>0&&i(".btn-wrapper",i(this)).hasClass("show")){i(document).add("*").off(),i(".btn-wrapper",i(this)).removeClass("show").addClass("hide"),i(".spinner-wrapper",i(this)).removeClass("hide").addClass("show");for(key in o.items)s.push(o.items[key]);n.items=s,o.couponCode!==e&&null!==o.couponCode&&""!==o.couponCode&&(n.couponCode=o.couponCode),o.couponMsg!==e&&null!==o.couponMsg&&""!==o.couponMsg&&(n.couponMsg=o.couponMsg),t=encodeURIComponent(JSON.stringify(n)),window.location.href="/order?paymentMethod=paypal&cart="+t}})},t.ShoppingCart.prototype._onWindowResize=function(){var t=this;i(window).on("resize",function(){t.setCartWidth(),t.expandedContainerHeight=i(window).height(),t.$container.hasClass("hidden")||i(".container").css("height",t.expandedContainerHeight+"px")})},t.ShoppingCart.prototype._onCouponCodeBtnClick=function(){var t=this;i(".coupon-code-btn").on("click",function(){var e=i(".coupon-code-input").val().trim();e.length>0&&i.post("/coupon",{couponCode:e},function(e){e.error?i(".coupon-code-input").addClass("invalid"):(console.log(e),i(".coupon-code-input").removeClass("invalid"),t.discount=e.discount,t.couponCode=e.code,t.couponMsg=e.msg,t._saveStateInCookie(),t._render())},"json")})}}(window.Sluice=window.Sluice||{},jQuery),!function(t,i,e){function n(i){i.on("scroll",function(){o(t("#infographicBottom").get(0),0)&&!t("#infographicThread").hasClass("animated")?setTimeout(function(){t("#infographicThread").addClass("animated bounceIn"),setTimeout(function(){t("#infographicClip").addClass("animated bounceIn"),setTimeout(function(){t("#infographicStash").addClass("animated bounceIn"),setTimeout(function(){t("#infographicSnap").addClass("animated bounceIn")},800)},800)},800)},100):o(t("#infographicTop").get(0),0)||(t("#infographicThread").removeClass("animated bounceIn"),t("#infographicClip").removeClass("animated bounceIn"),t("#infographicStash").removeClass("animated bounceIn"),t("#infographicSnap").removeClass("animated bounceIn"))})}function o(t,i){var e=t.getBoundingClientRect();return e.top-window.innerHeight+i<0}function s(){var i=window.innerHeight-60;375>i&&(i=375),t(".sluice-hero-wrapper").css("height",i+"px")}{var r=e;new r("#shoppingCartContainer")}s(),t(window).on("resize",function(){s()}),t("#HeroWrapper").herogallery({imgStyles:["pnl0","pnl1","pnl2","pnl3"],interval:7e3}),t("#learnMoreBtn").on("click",function(){i.scrollToId("#introSection",500)}),t("#showAllSpecsBtn").on("click",function(){var i=t("#fullSpecContainer");i.hasClass("hide")?(t(this).html("Less specs"),i.removeClass("hide").addClass("show")):(t(this).html("More specs"),i.removeClass("show").addClass("hide"))}),t(window).on("scroll",function(){var e=t(this).height(),n=t("#introSection").offset().top,o=0,s=-30,r=s,a=Math.abs(s),c=600,p=t("#introSectionParallaxBg");i.isUserMobile()?(p.css("left","0"),p.css("background-position","center left")):(n>e&&(o=n-e),t(this).scrollTop()>o&&(r=s+a*((t(this).scrollTop()-o)/c)),r>0&&(r=0),p.css("left",r+"%"))}),t(window).on("scroll",function(){var e=t(this).height(),n=t("#portableSection").offset().top,o=0,s=0,r=30,a=s,c=Math.abs(r-s),p=600,l=t("#portableSectionParallaxBg");i.isUserMobile()?(l.css("left","0"),l.css("background-position","center left")):(n>e&&(o=n-e),t(this).scrollTop()>o&&(a=s+c*((t(this).scrollTop()-o)/p)),a>30&&(a=30),l.css("right",a+"%"))}),n(t(window))}(jQuery,window.Sluice=window.Sluice||{},Sluice.ShoppingCart);
