!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(t){function o(t){return a.raw?t:encodeURIComponent(t)}function i(t){return a.raw?t:decodeURIComponent(t)}function e(t){return o(a.json?JSON.stringify(t):String(t))}function s(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return t=decodeURIComponent(t.replace(r," ")),a.json?JSON.parse(t):t}catch(o){}}function n(o,i){var e=a.raw?o:s(o);return t.isFunction(i)?i(e):e}var r=/\+/g,a=t.cookie=function(s,r,c){if(void 0!==r&&!t.isFunction(r)){if(c=t.extend({},a.defaults,c),"number"==typeof c.expires){var l=c.expires,p=c.expires=new Date;p.setTime(+p+864e5*l)}return document.cookie=[o(s),"=",e(r),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")}for(var d=s?void 0:{},h=document.cookie?document.cookie.split("; "):[],m=0,u=h.length;u>m;m++){var g=h[m].split("="),C=i(g.shift()),v=g.join("=");if(s&&s===C){d=n(v,r);break}s||void 0===(v=n(v))||(d[C]=v)}return d};a.defaults={},t.removeCookie=function(o,i){return void 0===t.cookie(o)?!1:(t.cookie(o,"",t.extend({},i,{expires:-1})),!t.cookie(o))}}),!function(t,o){t.scrollToId=function(t,i){return i=i||1e3,o("html,body").animate({scrollTop:o(t).offset().top},i),!1},t.redirect=function(t){document.location.href=t},t.redirectNoAsk=function(t){window.onbeforeunload=function(){return null},document.location.href=t},t.confirm=function(i){o(".btn-wrapper").removeClass("show").addClass("hide"),o(".spinner-wrapper").removeClass("hide").addClass("show"),t.redirectNoAsk(i)},t.isUserMobile=function(){return/(iPad|iPhone|iPod)/gi.test(navigator.userAgent)||o(window).width<481}}(window.Sluice=window.Sluice||{},$),!function(t){function o(o,i,e,s){t(".bcd-toggler",t(this)).hasClass("on")?(t(".bcd-toggler",t(this)).removeClass("on").removeClass(o).addClass("off").addClass(i),t(".bcd-toggler-lbl",t(this)).html(s),t(this).trigger("switchoff")):(t(".bcd-toggler",t(this)).removeClass("off").removeClass(i).addClass("on").addClass(o),t(".bcd-toggler-lbl",t(this)).html(e),t(this).trigger("switchon"))}function i(t,i,e,s){o.call(this,t,i,e,s)}var e=['<div class="bcd-toggler-wrapper {{SIZE}} ">','<div class="bcd-toggler ','{{STATE}} {{STATE_STYLE_CLASS}}">','<div class="bcd-toggler-switch"></div>',"</div>",'<div class="bcd-toggler-lbl {{VISIBILITY}}">{{LABEL}}</div>',"</div>"].join("");t.fn.toggler=function(o){var s,n=o.size||"large",r=o.onColorClass||"default-on",a=o.offColorClass||"default-off",c=o.initState||"off",l=o.showLbl===!1?!1:!0,p=o.lblOn||"on",d=o.lblOff||"off";s=e.replace("{{SIZE}}",n).replace("{{STATE}}",c).replace("{{STATE_STYLE_CLASS}}","on"===c?r:a).replace("{{VISIBILITY}}",l?"visible":"none").replace("{{LABEL}}","off"===c?d:p),t(this).html(s),t(this).on("mousedown",".bcd-toggler-wrapper",function(){i.call(this,r,a,p,d)})}}(jQuery),!function(t){Sluice.ShopGallery=function(o){var i=this;this.gallery=t("#"+o),this.imgIndex=0,this.setHammockThumbnailSrc("img/hammocks/red/red.jpg"),this.setBagThumbnailSrc("img/bags/red.jpg"),this.setStrapsThumbnailSrc("img/straps.jpg"),this.hideStrapsThumbnail(),this.setMainGalleryImg(0),t(".gallery-thumbnail.hammock").on("click",function(){i.setMainGalleryImg(0)}),t(".gallery-thumbnail.bag").on("click",function(){i.setMainGalleryImg(1)}),t(".gallery-thumbnail.straps").on("click",function(){i.setMainGalleryImg(2)})},Sluice.ShopGallery.prototype.setMainGalleryImg=function(o){var i=t(".gallery-thumbnail").eq(o).css("background-image");t(".gallery-main").css("background-image",i),this.imgIndex=o,0===this.imgIndex?t(".gallery-main").removeClass("bag").removeClass("straps").addClass("hammock"):1===this.imgIndex?t(".gallery-main").removeClass("hammock").removeClass("straps").addClass("bag"):2===this.imgIndex&&t(".gallery-main").removeClass("hammock").removeClass("bag").addClass("straps")},Sluice.ShopGallery.prototype.setHammockThumbnailSrc=function(o){o="url('"+o+"')",o!==t(".gallery-thumbnail.hammock").css("background-image")&&(t(".gallery-thumbnail.hammock").css("background-image",o),0===this.imgIndex&&this.setMainGalleryImg(0))},Sluice.ShopGallery.prototype.setBagThumbnailSrc=function(o){o="url('"+o+"')",o!==t(".gallery-thumbnail.bag").css("background-image")&&(t(".gallery-thumbnail.bag").css("background-image",o),1===this.imgIndex&&this.setMainGalleryImg(1))},Sluice.ShopGallery.prototype.setStrapsThumbnailSrc=function(o){t(".gallery-thumbnail.straps").css("background-image","url('"+o+"')")},Sluice.ShopGallery.prototype.showStrapsThumbnail=function(){t(".gallery-thumbnail-wrapper.straps").css("display","block")},Sluice.ShopGallery.prototype.hideStrapsThumbnail=function(){t(".gallery-thumbnail-wrapper.straps").css("display","none"),2===this.imgIndex&&this.setMainGalleryImg(0)}}(jQuery,window.Sluice=window.Sluice||{}),!function(t,o,i,e){var s=i,n=(new s,"Standard"),r="Hammie",a=5e3,c=4e3,l=2e3,p=2e3,d={RED:"red",BLUE:"blue",TAN:"tan",BURGUNDY:"burgundy",TURQUOISE:"turquoise"},h={};o.HammockBuilder=function(){this.$container=t(".builder-body"),this.reset(),this.render(),this.listen()},o.HammockBuilder.prototype.reset=function(){this.model=n,this.bodyColor=d.RED,this.accentColor=null,this.straps=!1,this.price=a},o.HammockBuilder.prototype.updatePrice=function(){var t=0;t+=this.model===n?a:c,null!==this.accentColor&&(t+=l),this.straps===!0&&(t+=p),this.price=t},o.HammockBuilder.prototype.setModelStandard=function(){this.model=n},o.HammockBuilder.prototype.setModelHammie=function(){this.model=r},o.HammockBuilder.prototype.setBodyColor=function(t){t=t||d.RED,t===this.accentColor&&(this.accentColor=t!==d.RED?d.RED:d.BLUE),this.bodyColor=t},o.HammockBuilder.prototype.setAccentColor=function(t){t=t||d.RED,this.bodyColor===t&&(t=this.bodyColor!==d.RED?d.RED:d.BLUE),this.accentColor=t},o.HammockBuilder.prototype.clearAccentColor=function(){this.accentColor=null},o.HammockBuilder.prototype.setStraps=function(t){this.straps=t},o.HammockBuilder.prototype.getDescription=function(){var t=this.bodyColor;return this.accentColor!==e&&null!==this.accentColor&&(t+=" with "+this.accentColor+" accent"),t+=this.straps===!0?", straps included":", straps not included"},o.HammockBuilder.prototype.getHammockImgSrc=function(){var t="img/hammocks/"+this.bodyColor+"/"+this.bodyColor;return null!==this.accentColor&&this.accentColor!==e&&(t+="-"+this.accentColor),t+=".jpg"},o.HammockBuilder.prototype.getBagImgSrc=function(){return"img/bags/"+this.bodyColor+".jpg"},o.HammockBuilder.prototype.getCurrentConfig=function(){var t={model:this.model,bodyColor:this.bodyColor,accentColor:this.accentColor,straps:this.straps,price:this.price,imgSrc:this.getHammockImgSrc(),desc:this.getDescription()};return t},h.MODEL_SECTION=['<div class="row pls mtl mbm prs">','<div class="gear-builder-text col l12 m12">',"Choose my hammock model","</div>","</div>",'<div class="row pls model-selection prs">','<div class="col l6 m6 s6 btn gray btn-grp btn-left inline-small active model-btn standard">Standard</div>','<div class="col l6 m6 s6 btn gray btn-grp btn-right inline-small model-btn hammie">Kid\'s Hammie</div>',"</div>",'<div id="infoMsg" class="row info-msg-container minimized hide pls prs">','<div class="col l12 mtl">','<div class="info-msg">',"The hammie is a smaller version of the Standard Hammock meant for kids!","</div>","</div>","</div>"].join(""),h.HORIZONTAL_BREAK=['<div class="row pls prs mtl">','<div class="hb col l12 m12"></div>',"</div>"].join(""),h.BODY_COLOR_SECTION=['<div class="row pls mtl mbs prs">','<div class="gear-builder-text col l12 m12">',"Choose my hammock's color","</div>","</div>",'<div id="bodyColors" class="row">','<div class="col s20p m20p l20p color-choice active" data-color="red">','<img src="img/fabric-colors/red-fabric.png", alt="red" />',"</div>",'<div class="col l20p m20p s20p color-choice" data-color="blue">','<img src="img/fabric-colors/blue-fabric.png", alt="blue" />',"</div>",'<div class="col l20p m20p s20p color-choice" data-color="tan">','<img src="img/fabric-colors/tan-fabric.png", alt="tan" />',"</div>",'<div class="col l20p m20p s20p color-choice" data-color="burgundy">','<img src="img/fabric-colors/burgundy-fabric.png", alt="burgundy" />',"</div>",'<div class="col l20p m20p s20p color-choice" data-color="turquoise">','<img src="img/fabric-colors/turquoise-fabric.png", alt="turquoise" />',"</div>","</div>"].join(""),h.ACCENT_COLOR_SECTION=['<div class="row pls mtl mbs prs">','<div class="gear-builder-text col l9 m9 s9">',"Choose my hammock's accent color","</div>",'<div class="col l3 m3 s3">','<div id="accentColorToggler" class="toggler-wrapper"></div>',"</div>","</div>",'<div id="accentColors" class="row color-choices optional hidden">','<div class="col s20p m20p l20p color-choice active" data-color="red">','<img src="img/fabric-colors/red-fabric.png", alt="red" />',"</div>",'<div class="col l20p m20p s20p color-choice" data-color="blue">','<img src="img/fabric-colors/blue-fabric.png", alt="blue" />',"</div>",'<div class="col l20p m20p s20p color-choice" data-color="tan">','<img src="img/fabric-colors/tan-fabric.png", alt="tan" />',"</div>",'<div class="col l20p m20p s20p color-choice" data-color="burgundy">','<img src="img/fabric-colors/burgundy-fabric.png", alt="burgundy" />',"</div>",'<div class="col l20p m20p s20p color-choice" data-color="turquoise">','<img src="img/fabric-colors/turquoise-fabric.png", alt="turquoise" />',"</div>","</div>"].join(""),h.STRAPS_SECTION=['<div class="row pls mtl mbs prs">','<div class="gear-builder-text col l9 m9 s9">',"I need straps","</div>",'<div class="col l3 m3 s3">','<div id="strapsToggler" class="toggler-wrapper"></div>',"</div>","</div>"].join(""),h.PRICE_SECTION=['<div class="row pls prs mtl">','<div class="col l12 m12 total-hammock-price">$<span id="hammockPrice">50.00</span></div>',"</div>"].join(""),h.ADD_TO_CART_SECTION=['<div class="row">','<div class="col l12 m12">','<div class="cart-btn-wrapper">','<div id="addHammockToCartBtn" class="btn cart-btn shadow">Add to cart</div>',"</div>","</div>","</div>"].join(""),o.HammockBuilder.prototype.render=function(){var o=h.MODEL_SECTION+h.BODY_COLOR_SECTION+h.HORIZONTAL_BREAK+h.ACCENT_COLOR_SECTION+h.HORIZONTAL_BREAK+h.STRAPS_SECTION+h.HORIZONTAL_BREAK+h.PRICE_SECTION+h.ADD_TO_CART_SECTION;this.$container.html(o),t(".toggler-wrapper").toggler({initState:"off",size:"large",lblOn:"yes",lblOff:"no"})},o.HammockBuilder.prototype.renderModelBtnGroup=function(){t(".btn-grp").removeClass("active"),this.model===n?(t(".btn-grp.standard").addClass("active"),t(".info-msg-container").removeClass("show").addClass("hide")):(t(".btn-grp.hammie").addClass("active"),t(".info-msg-container").removeClass("hide").addClass("show"))},o.HammockBuilder.prototype.renderBodyColor=function(){t("#bodyColors .color-choice").removeClass("active"),t('#bodyColors .color-choice[data-color="'+this.bodyColor+'"]').addClass("active")},o.HammockBuilder.prototype.renderAccentColor=function(){t("#accentColors .color-choice").removeClass("active"),t("#accentColors .color-choice").removeClass("disabled"),null!==this.accentColor&&t('#accentColors .color-choice[data-color="'+this.accentColor+'"]').addClass("active"),t('#accentColors .color-choice[data-color="'+this.bodyColor+'"]').addClass("disabled")},o.HammockBuilder.prototype.renderPrice=function(){t("#hammockPrice").html((Math.floor(this.price)/100).toFixed(2))},o.HammockBuilder.prototype.listen=function(){this.onModelClick(),this.onBodyColorClick(),this.onAccentColorToggle(),this.onAccentColorClick(),this.onStrapsToggle(),this.onAddToCartClick()},o.HammockBuilder.prototype.onModelClick=function(){var o=this;t(".btn-grp.model-btn").on("click",function(){o.model=t(this).hasClass("standard")?n:r,o.updatePrice(),o.renderModelBtnGroup(),o.renderPrice()})},o.HammockBuilder.prototype.onBodyColorClick=function(){var o=this;t("#bodyColors .color-choice").on("click",function(){var i=t(this).attr("data-color");o.setBodyColor(i),o.renderBodyColor(),o.renderAccentColor(),o.$container.trigger("change")})},o.HammockBuilder.prototype.onAccentColorToggle=function(){var o=this;t("#accentColorToggler").on("switchon",function(){t("#accentColors").removeClass("hidden"),o.setAccentColor(),o.renderAccentColor(),o.updatePrice(),o.renderPrice(),o.$container.trigger("change")}).on("switchoff",function(){t("#accentColors").addClass("hidden"),o.clearAccentColor(),o.renderAccentColor(),o.updatePrice(),o.renderPrice(),o.$container.trigger("change")})},o.HammockBuilder.prototype.onAccentColorClick=function(){var o=this;t("#accentColors .color-choice").on("click",function(){var i=t(this).attr("data-color");o.setAccentColor(i),o.renderAccentColor(),o.$container.trigger("change")})},o.HammockBuilder.prototype.onStrapsToggle=function(){var o=this;t("#strapsToggler").on("switchon",function(){o.setStraps(!0),o.updatePrice(),o.renderPrice(),o.$container.trigger("change")}).on("switchoff",function(){o.setStraps(!1),o.updatePrice(),o.renderPrice(),o.$container.trigger("change")})},o.HammockBuilder.prototype.onAddToCartClick=function(){var o=this;t("#addHammockToCartBtn").on("click",function(t){t.stopPropagation(),o.$container.trigger("addtocart")})}}(jQuery,window.Sluice=window.Sluice||{},Sluice.ShopGallery),!function(t,o,i){function e(t){var o,i=[t.type,";"];for(o in t.config)i.push(o),i.push(":"),i.push(t.config[o]),i.push(";");return i.join("")}var s=10,n=4e3,r=600,a={};t.ShoppingCart=function(t,s){var n;this.$container=o(t),this.$headerComponent=o(".mini-cart-wrapper"),this.getItemKey=s||e,this.getItemKey=e,this.expandedContainerHeight=o(window).height(),o.cookie.json=!0;try{n=o.cookie("sluice_cart_cookie"),n!==i&&null!==n&&""!==n?(this.items=n.items||{},this.keys=n.keys||[],this.numItems=n.numItems||0,this.nextUid=n.nextUid||0,this.discount=n.discount||0,this.couponCode=n.couponCode||"",this.couponMsg=n.couponMsg||""):this.empty()}catch(r){o.removeCookie("sluice_cart_cookie",null),this.empty()}this.totalPrice=this.getTotalPrice(),this._render(),this._listen()},t.ShoppingCart.prototype.empty=function(){this.items={},this.keys=[],this.numItems=0,this.nextUid=0,this.totalPrice=0,this.discount=0,this.couponCode="",this.couponMsg=""},t.ShoppingCart.prototype.getShippingPrice=function(){return this.getSubtotalPrice()>=n?0:r},t.ShoppingCart.prototype.getSubtotalPrice=function(){var t,o,e=0;for(o=0;o<this.keys.length;o++)t=this.keys[o],t!==i&&null!==t&&this.items[t]!==i&&null!==this.items[t]&&(e+=this.items[t].item.config.price*this.items[t].quantity);return e},t.ShoppingCart.prototype.getTotalPrice=function(){var t=this.getShippingPrice()+this.getSubtotalPrice();return t-=t*this.discount},t.ShoppingCart.prototype.addItem=function(t,o){var e=this.getItemKey(t);o=o||1,this.items[e]!==i&&null!==this.items[e]?(this.items[e].quantity+o>s&&(o=s-this.items[e].quantity),this.items[e].quantity+=o):(this.items[e]={uid:this.nextUid,item:t,quantity:o},this.keys[this.nextUid]=e,this.nextUid++),this.numItems+=o,this.totalPrice=this.getTotalPrice(),this._saveStateInCookie(),this._render()},t.ShoppingCart.prototype.removeItem=function(t){var o=this.getItemKey(t);this.removeItemByKey(o)},t.ShoppingCart.prototype.removeItemByUid=function(t){var o=this.keys[t];this.removeItemByKey(o)},t.ShoppingCart.prototype.removeItemByKey=function(t){var o=this.items[t];return o===i||null===o?null:(this.keys[o.uid]=null,this.numItems-=o.quantity,delete this.items[t],this.totalPrice=this.getTotalPrice(),this._saveStateInCookie(),void this._render())},t.ShoppingCart.prototype.updateQuantity=function(t,o){var i=this.getItemKey(t);this.updateQuantityByKey(i,o)},t.ShoppingCart.prototype.updateQuantityByUid=function(t,o){var i=this.keys[t];this.updateQuantityByKey(i,o)},t.ShoppingCart.prototype.updateQuantityByKey=function(t,o){this.items[t]!==i&&(isNaN(o)||o>99||(0===o?(this.removeItemByKey(t),0===this.numItems&&this.empty()):0>o?o=Math.abs(o):(this.numItems+=o-this.items[t].quantity,this.items[t].quantity=o),this.totalPrice=this.getTotalPrice(),this._saveStateInCookie(),this._render()))},t.ShoppingCart.prototype.priceToString=function(t){var o=(Math.floor(t)/100).toFixed(2);return o="0.00"===o?"FREE":"$"+o},t.ShoppingCart.prototype._saveStateInCookie=function(){var t={};t.items=this.items,t.keys=this.keys,t.numItems=this.numItems,t.nextUid=this.nextUid,t.discount=this.discount,t.couponCode=this.couponCode,t.couponMsg=this.couponMsg,o.cookie.json=!0,o.removeCookie("sluice_cart_cookie"),o.cookie("sluice_cart_cookie",t,{expires:14})},a.CART=['<div class="shopping-cart-inner">','<div class="grid">{{CART_INNER}}</div>',"</div>"].join(""),a.ACTION_BTNS=['<div class="row cart-row mtl">','<div class="col l6 m6 s6 btn btn-grp btn-left blue-solid keep-shopping-btn">Keep shopping</div>','<div id="checkoutBtn" class="col spinner-btn l6 m6 s6 btn btn-grp btn-right green-solid  {{EMPTY_CLASS}}">','<div class="btn-wrapper show">',"Checkout with PayPal","</div>",'<div class="spinner-wrapper hide">','<div class="spinner">','<div class="rect1"></div>','<div class="rect2"></div>','<div class="rect3"></div>','<div class="rect4"></div>','<div class="rect5"></div>',"</div>","</div>","</div>","</div>"].join(""),a.TOTALS=['<div class="totals-wrapper mtl mbl">','<div class="row cart-row ptl">','<div class="col shopping-cart-total-price l12">','<span class="cart-total-price-lbl">Total</span>','<span class="cart-total-price-wrapper">','<span class="cart-total-price">{{TOTAL_PRICE}}</span>',"</span>","</div>","</div>",'<div class="row cart-row  pls prs mtl mbl">','<div class="hb col l12"></div>',"</div>",'<div class="row cart-row">','<span class="coupon-code-lbl">Coupon Code</span>','<span class="coupon-code-wrapper">','<input type="text" class="coupon-code-input">','<input class="coupon-code-btn btn green-solid shadow" type="button" value="apply">',"</span>","</div>",'<div class="row cart-row  pls prs mtl mbl">','<div class="hb col l12"></div>',"</div>",'<div class="row cart-row mtm coupon-row">','<span class="shopping-lbl coupon-lbl">Coupon</span>','<span class="coupon-msg"></span>',"</div>",'<div class="row cart-row mtm">','<div class="col subtotal l12">','<span class="total-count">{{TOTAL_ITEM_COUNT}}</span>','<span class="total-count-lbl">{{TOTAL_ITEM_COUNT_LBL}}</span>','<span class="cart-subtotal-wrapper">','<span class="cart-subtotal">{{SUBTOTAL_PRICE}}</span>',"</span>","</div>","</div>",'<div class="row cart-row mtm pbl">','<div class="col subtotal l12">','<span class="shopping-lbl">Shipping</span>','<span class="shipping-wrapper">',"<span>{{SHIPPING_PRICE}}</span>","</span>","</div>","</div>","</div>"].join(""),a.SHIPPING_MESSAGE=['<div class="shipping-msg-wrapper mtl mbl">','<div class="row cart-row pam">',"Free US shipping on orders over $40.00","</div>","</div>"].join(""),a.CART_ITEM=['<div class="row cart-row pam">','<div class="col l6 m6 s6">','<div class="cart-preview-wrapper prm">','<img src="{{PREVIEW_SRC}}", alt="preview" />',"</div>","</div>",'<div class="col l5 m5 s5">','<div class="cart-item-quantity">QTY ','<span class="qty-val">{{ITEM_QTY}}</span>','<input type="button" class="update-btn plus mlm" value="+" data-item-key="{{ITEM_KEY}}" />','<input type="button" class="update-btn minus mlm" value="-" data-item-key="{{ITEM_KEY}}" />',"</div>",'<div class="cart-item-title ptm">{{MODEL}}</div>','<div class="cart-item-price pbm">','<span class="cart-item-price-val">{{ITEM_PRICE}}</span>',"</div>",'<div class="cart-item-desc">{{ITEM_DESC}}</div>',"</div>",'<div class="col l1 m1 s1">','<div class="x-btn remove-item-btn" data-item-key="{{ITEM_KEY}}">X</div>',"</div>","</div>"].join(""),a.LINE_BREAK=['<div class="row cart-row  pls prs mtl">','<div class="hb col l12"></div>',"</div>"].join(""),a.EMPTY_CART=['<div class="row cart-row pls prs mtl">','<div class="col l12 l-txt-center m-txt-center s-txt-center">',"Your cart is empty","</div>","</div>"].join(""),a.HEADER_COMPONENT=['<div class="mini-cart">','<div class="mini-cart-lbl">Cart</div>','<div class="mini-cart-quantity">{{TOTAL_ITEM_COUNT}}</div>',"</div>"].join(""),t.ShoppingCart.prototype._render=function(){var t,e,s=a.HEADER_COMPONENT,n=a.CART,r=a.ACTION_BTNS,c="";if(this.totalPrice=this.getTotalPrice(),this.numItems<1)this.$container.addClass("empty"),r=r.replace("{{EMPTY_CLASS}}","empty"),r+=a.EMPTY_CART;else for(this.$container.removeClass("empty"),r=r.replace("{{EMPTY_CLASS}}",""),r+=a.TOTALS.replace("{{TOTAL_PRICE}}",this.priceToString(this.totalPrice)).replace("{{TOTAL_ITEM_COUNT}}",this.numItems).replace("{{TOTAL_ITEM_COUNT_LBL}}",this.numItems>1?" Items":" Item").replace("{{SUBTOTAL_PRICE}}",this.priceToString(this.getSubtotalPrice())).replace("{{SHIPPING_PRICE}}",this.priceToString(this.getShippingPrice())),r+=a.SHIPPING_MESSAGE,r+=a.LINE_BREAK,e=0;e<this.keys.length;e++)t=this.items[this.keys[e]],t!==i&&null!==t&&(c="","Hammock"===t.item.type&&(c=" Hammock"),r+=a.CART_ITEM.replace("{{PREVIEW_SRC}}",t.item.config.imgSrc).replace("{{ITEM_QTY}}",t.quantity).replace("{{MODEL}}",t.item.config.model+c).replace(/\{\{ITEM_KEY\}\}/g,this.keys[e]).replace("{{ITEM_PRICE}}",this.priceToString(t.item.config.price)).replace("{{ITEM_DESC}}",t.item.config.desc),r+=a.LINE_BREAK);n=n.replace("{{CART_INNER}}",r),this.$container.html(n),this.discount>0&&this.couponMsg!==i&&null!==this.couponMsg&&this.couponMsg.length>0?(o(".coupon-row").removeClass("hide"),console.log("message: "+this.couponMsg),o(".coupon-msg").html(this.couponMsg)):o(".coupon-row").addClass("hide"),this.setCartWidth(),this.$headerComponent.html(s.replace("{{TOTAL_ITEM_COUNT}}",this.numItems))},t.ShoppingCart.prototype.hide=function(){this.$container.addClass("hidden"),o(".container").removeClass("expanded-shopping-cart").css("height","auto")},t.ShoppingCart.prototype.expand=function(){this.$container.removeClass("hidden"),o(".container").addClass("expanded-shopping-cart").css("height",this.expandedContainerHeight+"px")},t.ShoppingCart.prototype.setCartWidth=function(){var t=o(window).width();t>480&&(t=480),o(".shopping-cart-inner").css("width",t+"px")},t.ShoppingCart.prototype._listen=function(){this._onKeepShoppingClick(),this._onRemoveBtnClick(),this._onPlusBtnClick(),this._onMinusBtnClick(),this._onQuantityLoseFocus(),this._onCartBlur(),this._onCartClickStopPropagation(),this._onCartHeaderClick(),this._onCheckoutBtnClick(),this._onWindowResize(),this._onCouponCodeBtnClick()},t.ShoppingCart.prototype._onKeepShoppingClick=function(){var t=this;this.$container.on("click",".shopping-cart-inner .grid .row .keep-shopping-btn",function(){t.hide()})},t.ShoppingCart.prototype._onRemoveBtnClick=function(){var t=this;this.$container.on("click",".shopping-cart-inner .grid .row .col .remove-item-btn",function(){t.removeItemByKey(o(this).attr("data-item-key"))})},t.ShoppingCart.prototype._onPlusBtnClick=function(){var t,e=this;this.$container.on("click",".shopping-cart-inner .grid .row .col .cart-item-quantity .plus",function(){t=o(this).attr("data-item-key"),e.items[t]!==i&&null!==e.items[t]&&e.items[t].quantity<10&&(e.updateQuantityByKey(t,e.items[t].quantity+1),e._render())})},t.ShoppingCart.prototype._onMinusBtnClick=function(){var t,e=this;this.$container.on("click",".shopping-cart-inner .grid .row .col .cart-item-quantity .minus",function(){t=o(this).attr("data-item-key"),e.items[t]!==i&&null!==e.items[t]&&(e.updateQuantityByKey(t,e.items[t].quantity-1),e._render())})},t.ShoppingCart.prototype._onQuantityLoseFocus=function(){var t=this;this.$container.on("blur",".shopping-cart-inner .grid .row .col .cart-item-quantity .qty-input",function(){var i=o(this).val().trim();(i.length>2||i.length<1||isNaN(i)||parseInt(i)>s)&&t._render()})},t.ShoppingCart.prototype._onCartBlur=function(){var t=this;o(document).on("click",function(){t.hide()})},t.ShoppingCart.prototype._onCartClickStopPropagation=function(){this.$container.on("click",function(t){t.stopPropagation()})},t.ShoppingCart.prototype._onCartHeaderClick=function(){var t=this;this.$headerComponent.on("click",function(o){t.expand(),o.stopPropagation()})},t.ShoppingCart.prototype._onCheckoutBtnClick=function(){var t,e,s=this,n=[];this.$container.on("click",".shopping-cart-inner .grid .row #checkoutBtn",function(r){if(r.stopPropagation(),s.numItems>0&&o(".btn-wrapper",o(this)).hasClass("show")){o(document).add("*").off(),o(".btn-wrapper",o(this)).removeClass("show").addClass("hide"),o(".spinner-wrapper",o(this)).removeClass("hide").addClass("show");for(key in s.items)n.push(s.items[key]);e.items=n,s.couponCode!==i&&null!==s.couponCode&&""!==s.couponCode&&(e.couponCode=s.couponCode),s.couponMsg!==i&&null!==s.couponMsg&&""!==s.couponMsg&&(e.couponMsg=s.couponMsg),t=encodeURIComponent(JSON.stringify(e)),window.location.href="/order?paymentMethod=paypal&cart="+t}})},t.ShoppingCart.prototype._onWindowResize=function(){var t=this;o(window).on("resize",function(){t.setCartWidth(),t.expandedContainerHeight=o(window).height(),t.$container.hasClass("hidden")||o(".container").css("height",t.expandedContainerHeight+"px")})},t.ShoppingCart.prototype._onCouponCodeBtnClick=function(){var t=this;o(".coupon-code-btn").on("click",function(){var i=o(".coupon-code-input").val().trim();i.length>0&&o.post("/coupon",{couponCode:i},function(i){i.error?o(".coupon-code-input").addClass("invalid"):(console.log(i),o(".coupon-code-input").removeClass("invalid"),t.discount=i.discount,t.couponCode=i.code,t.couponMsg=i.msg,t._saveStateInCookie(),t._render())},"json")})}}(window.Sluice=window.Sluice||{},jQuery),!function(t,o,i,e){var s=o,n=i,r=e,a=new s,c=new n,l=new r("#shoppingCartContainer");a.$container.on("change",function(){var t=a.getHammockImgSrc(),o=a.getBagImgSrc();c.setHammockThumbnailSrc(t),c.setBagThumbnailSrc(o),a.straps===!0?c.showStrapsThumbnail():c.hideStrapsThumbnail()}).on("addtocart",function(){l.addItem({type:"Hammock",config:a.getCurrentConfig()}),l.expand()}),l.$container.on("checkout",function(){console.log("checkout!")}),t("#strapBagColors .color-choice").on("click",function(){t(this).parent().children().removeClass("active"),t(this).addClass("active")}),t("#addStrapsToCartBtn").on("click",function(o){var i=t("#strapBagColors .color-choice.active").attr("data-color");l.addItem({type:"Straps",config:{model:"Straps",bagColor:i,desc:"Extra straps with "+i+" bag",price:2e3,imgSrc:"img/straps.jpg"}}),l.expand(),o.stopPropagation()}),t("#addCarabinerToCartBtn").on("click",function(t){l.addItem({type:"Carabiner",config:{model:"Black Diamond Neutrino",desc:"Climbing rated carabiner",price:550,imgSrc:"img/bd-neutrino.jpg"}}),l.expand(),t.stopPropagation()})}(jQuery,Sluice.HammockBuilder,Sluice.ShopGallery,Sluice.ShoppingCart);
